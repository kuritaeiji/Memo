# CloudFormation

- テンプレートファイル: プロビジョニングするリソースを記述した yaml または json ファイル
- スタック: スタックにはテンプレートファイルが登録される。スタックを作成、更新、削除することでリソースのコレクションを作成、更新、削除する
- 変更セット: プロビジョニング済みのリソースに変更を加える場合はスタックを更新する。リソースを変更する前に変更セットを確認して、作成・削除・変更・置換されるリソース一覧を確認できる。

## 仕組み

スタックを作成する場合

1. テンプレートファイルを作成する
2. S3 バケットにテンプレートファイルをアップロードする
3. テンプレートファイル(S3 のバケット名+オブジェクト名)を指定してスタックを作成する
4. CloudFormation がリソースを作成する

スタックを更新する場合

1. 変更したテンプレートファイルを S3 にアップロードする
2. 更新するスタックと S3 の URL を指定して変更セットを作成する。パラメーターが存在する場合は値を指定する
3. 変更セットを確認する
4. スタックに変更セットを適用する
5. CloudFormation がリソースを更新する

スタックを削除する場合

1. スタックを削除する
2. CloudFormation がリソースをすべて削除する
