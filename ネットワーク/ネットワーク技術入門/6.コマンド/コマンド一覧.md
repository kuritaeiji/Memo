# コマンド一覧

## tcpdump

パケットをキャプチャーするためのコマンド。tcpdump 実行後に流れるパケットをキャプチャーする。

```bash
tcpdump -i net0 -w /tmp/tinet/ip.pcapng port 80
```

| プロトコル   | オプション                 | 意味                                                                                                                     |
| :----------- | :------------------------- | :----------------------------------------------------------------------------------------------------------------------- |
| 全般         | -c <パケット数>            | 指定した数のパケットをキャプチャーする                                                                                   |
|              | -i <インターフェース名>    | 指定したインターフェースのパケットをキャプチャーする。any を指定すると全てのインターフェースのパケットをキャプチャーする |
|              | -v -vv -vvv                | 詳細な情報を表示する。v を増やすほどより詳細になる                                                                       |
|              | -w <ファイル名>            | キャプチャーしたパケットを指定したファイルに書き出す                                                                     |
| イーサネット | ether host <MAC アドレス>  | MAC アドレスを指定したイーサネットフレーム                                                                               |
|              | ether src <MAC アドレス>   | 送信元 MAC アドレスが MAC アドレスを指定したイーサネットフレーム                                                         |
|              | ether dst <MAC アドレス>   | 宛先 MAC アドレスが MAC アドレスを指定したイーサネットフレーム                                                           |
|              | ether proto <プロトコル名> | ip や arp など                                                                                                           |
|              | ether broadcast            | ブロードキャストのイーサネットフレーム                                                                                   |
| ARP          | arp                        | 全ての ARP フレーム                                                                                                      |
|              | not arp                    | ARP 以外のフレーム                                                                                                       |
|              | arp[6:2]                   | ARP Request                                                                                                              |
|              | arp[6:2]                   | ARP Response                                                                                                             |

## ifconfig

ネットワークインターフェースの設定や情報の表示をする

```bash
ifconfig net0
```

## ping

ICMP echo パケットを送信する

```bash
ping 192.168.1.1 -c 2
```

| オプション                           | 意味                                                      |
| :----------------------------------- | :-------------------------------------------------------- |
| -4                                   | ipv4                                                      |
| -6                                   | ipv6                                                      |
| -c <カウント>                        | パケットを送信する回数を設定する                          |
| -i <秒>                              | インターバルを設定する                                    |
| -I <インターフェース名\|IP アドレス> | パケットを送信するインターフェース・IP アドレスを指定する |
| -t \<TTL>                            | TTL を設定する                                            |

## ip

ネットワークインターフェース・MAC アドレス・IP アドレス・ARP テーブルの設定や情報取得を行う

```bash
ip link # ネットワークインターフェースのMACアドレスを表示する
ip -d link # より詳細なネットワークインターフェースの情報を表示する
ip link set net0 address 02:42:ff:6d:2b:ac # MACアドレスを設定する

ip neigh # ARPテーブルを表示する
ip neigh add <IPアドレス> dev <インターフェース名> lladdr <MACアドレス> # ARPエントリーを追加する
ip neigh del <IPアドレス> dev <インターフェース名> # ARPエントリーを削除するf
ip neigh flush all # 全てのARPエントリーを削除する
ip neigh flush dev <インターフェース名> # 指定したインターフェースのARPエントリーを削除する

ip addr # ネットワークインターフェースのIPアドレス・MACアドレスを表示する
ip -d addr # より詳細なネットワークインターフェースの情報を取得する（VLANタグなど）
```
