# Kubernetes とは

Kubernetes はコンテナオーケストレーション。複数ノード・複数コンテナを管理することができる。

## 特徴

- コンテナオーケストレーション
- 宣言型（手続き型ではない）
- ドメイン特化言語（汎用言語ではない）
- マスターノード
- エージェント（各ノードは kubelet がインストールされている）

## 宣言型

例えば ReplicaSet のレプリカ数を 10 として apply したとする。その後レプリカ数を 15 に増やすためにマニフェストファイルのレプリカ数を 15 に編集して apply したとする。 手続き型の場合はレプリカ数は 10+15=25 個になる。宣言型の場合はレプリカ数は 15 個になる。  
宣言型のコードは最終的な望ましい状態を宣言するだけなのでどのようにその状態を実現するかは Kubernetes が判断する。Kubernetes は etcd に現実状態と理想状態を持つのでその差分を埋めてくれる。今回の場合は 5 個レプリカ数が足りないと Kubernetes が判断して 5 個の Pod を起動してくれる。  
他に宣言型の言語としては SQL がある。SQL も最終的に欲しい結果を宣言するとデータベースが実行計画を作成して結果を取得してくれる。

## ドメイン特化言語

Kubernetes は YAML を使用するためドメイン特化言語になる。

## マスターノード

kubectl コマンドを用いてマスターノードに理想状態を宣言する。各ノードは kubelet のようなエージェントから理想状態を引き出し Pod などの更新を行う。

## エージェント

各ノードはエージェントである kubelet がインストールされている。kubelet はマスターノードから理想状態を引き出し Pod 等を更新する。
